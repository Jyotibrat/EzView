<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Previewer</title>
    <link rel="stylesheet" href="styles/file_upload.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="navbar-placeholder"></div>

    <main>
        <section>
            <label for="file">Upload Markdown File:</label>
            <input type="file" id="file" name="file" accept=".md" required>
        </section>

        <section id="preview">
            <h2>Preview</h2>
            <div id="content"></div>
        </section>
    </main>

    <button onclick="topFunction()" id="scrBtn" title="Go to top">Top</button> 

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Add event listener for file upload
        const fileInput = document.getElementById('file');
        const contentDiv = document.getElementById('content');

        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = () => {
                    const markdown = reader.result;
                    contentDiv.innerHTML = marked.parse(markdown);
                };
                reader.readAsText(file);
            }
        });

        // Get the button and footer elements
        let myBtn = document.getElementById("scrBtn");
        let footer = document.getElementById("footer-placeholder");

        // Show or hide the button based on scroll position and footer visibility
        window.onscroll = function () {
            const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
            const footerPosition = footer.offsetTop - window.innerHeight;

            if (scrollPosition > 20 && scrollPosition < footerPosition) {
                myBtn.style.display = "block";
            } else {
                myBtn.style.display = "none";
            }
        };

        // Scroll to the top of the page smoothly
        function topFunction() {
            window.scrollTo({
                top: 0,
                behavior: "smooth",
            });
        }
    </script>
</body>
</html>